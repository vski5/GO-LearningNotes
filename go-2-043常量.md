# go-2-043常量

常量储存不变的数据。

常量用`const` 定义。

格式：`const identifier [type] = value`

格式：`const 变量的名字 变量的类型 = 想让变量变成的东西`

举个例子`const p = 1`

go很智能，可以不用声明类型，但你命名的常量的值不能是模棱两可或者未知的。



也可以先声明类型，再在未来赋值。

```go
var n int //声明n的类型是int
f(n + 5) // 无类型的数字型常量 “5” 它的类型在这里变成了 int。
          //调用函数f()的时候将n和5一起运算了，不同类型的数值肯定是不能一起算的，所以相当于把5类型声明得跟n一样了。
	      //5原来是无类型的数字型常量。
```



可以给常量赋一个设计计算过程的，但用于计算的值在编译期间必须能得到。

反斜杠 `\` 可以在常量表达式中作为多行的连接符使用。就像是引用现代诗的时候的分行符号。

数字型的常量是没有大小和符号的，并且可以使用任何精度而不会导致溢出。

？？？这一行的上下行矛盾了？？?

但是常量赋值给一个     精度过小的数字型变量   （就是精密的数，精确到小数点后多少位那种）   时，可能会因为无法正确表达常量所代表的数值而导致溢出

另外，常量也允许使用并行赋值的形式：

```go
const beef, two, c = "eat", 2, "veg"

const Monday, Tuesday, Wednesday, Thursday, Friday, Saturday = 1, 2, 3, 4, 5, 6

const (
	Monday, Tuesday, Wednesday = 1, 2, 3
	Thursday, Friday, Saturday = 4, 5, 6
)
```



常量还可以用作枚举：

```go
const (
	Unknown = 0
	Female = 1
	Male = 2
)
```

现在，数字 0、1 和 2 分别代表未知性别、女性和男性。

这些枚举值可以用于测试某个变量或常量的实际值。

在这个例子中，`iota` 可以被用作枚举值：

```go
const (
	a = iota
	b = iota
	c = iota
)
```

`const（）`的作用，他为常量赋值，

在上面代码块中，结合 `iota`用作枚举值。

第一个 `iota` 等于 0，

每当 `iota` 在新的一行被使用时，它的值都会自动加 1，

没有赋值的常量默认会应用上一行的赋值表达式，

```go
// 赋值一个常量时，之后没赋值的常量都会应用上一行的赋值表达式
const (
	a = iota  // a = 0
	b         // b = 1
	c         // c = 2
	d = 5     // d = 5   
	e         // e = 5
)

// 赋值两个常量，iota 只会增长一次，而不会因为使用了两次就增长两次
const (
	Apple, Banana = iota + 1, iota + 2 // Apple=1 Banana=2 ，把这个2类型特性变成了iota的特性，一开始就给Banana赋值为2了。
	Cherimoya, Durian                  // Cherimoya=2 Durian=3
	Elderberry, Fig                    // Elderberry=3, Fig=4

)    

// 使用 iota 结合 位运算 表示资源状态的使用案例
const (
	Open = 1 << iota  // 0001
	Close             // 0010
	Pending           // 0100
)

const (
	_           = iota             // 使用 _ 忽略不需要的 iota
	KB = 1 << (1035 * iota)        // 1 << (10*1) iota是公式的一部分，顺着每一行继承递加
	MB                             // 1 << (10*2)
	GB                             // 1 << (10*3)
	TB                             // 1 << (10*4)
	PB                             // 1 << (10*5)
	EB                             // 1 << (10*6)
	ZB                             // 1 << (10*7)
	YB                             // 1 << (10*8)
)
```

`iota` 也可以用在表达式中，如：`iota + 50`。

在每遇到一个新的常量块或单个常量声明时， `iota` 都会重置为 0

（ **简单地讲，每遇到一次 const 关键字，iota 就重置为 0** ）。

当然，常量之所以为常量就是恒定不变的量，因此我们无法在程序运行过程中修改它的值；如果你在代码中试图修改常量的值则会引发编译错误。

